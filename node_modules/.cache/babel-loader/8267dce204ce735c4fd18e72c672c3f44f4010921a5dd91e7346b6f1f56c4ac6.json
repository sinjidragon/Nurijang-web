{"ast":null,"code":"var _s = $RefreshSig$();\n// hooks/useMarkerClusterer.js\nimport { useRef, useEffect } from 'react';\nimport { MarkerClusterer } from \"@googlemaps/markerclusterer\";\nconst createSvgClusterIcon = (size, color, opacity) => {\n  const svg = `\n    <svg width=\"${size}\" height=\"${size}\" viewBox=\"0 0 ${size} ${size}\" xmlns=\"http://www.w3.org/2000/svg\">\n      <circle \n        cx=\"${size / 2}\" \n        cy=\"${size / 2}\" \n        r=\"${size / 2 - 2}\"\n        fill=\"${color}\"\n        fill-opacity=\"${opacity}\"\n        stroke=\"white\"\n        stroke-width=\"2\"\n      />\n    </svg>\n  `;\n  return `data:image/svg+xml;base64,${btoa(svg)}`;\n};\nconst clusterStyles = [{\n  textColor: 'white',\n  textSize: 14,\n  width: 40,\n  height: 40,\n  url: createSvgClusterIcon(40, '#596FB7', 0.9),\n  anchor: [20, 20]\n}, {\n  textColor: 'white',\n  textSize: 16,\n  width: 50,\n  height: 50,\n  url: createSvgClusterIcon(50, '#11235A', 0.9),\n  anchor: [25, 25]\n}, {\n  textColor: 'white',\n  textSize: 18,\n  width: 60,\n  height: 60,\n  url: createSvgClusterIcon(60, '#11235A', 1),\n  anchor: [30, 30]\n}];\nconst useMarkerClusterer = ({\n  mapRef,\n  facilities,\n  setSelectedFacility,\n  markerIcon\n}) => {\n  _s();\n  const markerClustererRef = useRef(null);\n  useEffect(() => {\n    var _mapRef$current, _mapRef$current$state;\n    if ((_mapRef$current = mapRef.current) !== null && _mapRef$current !== void 0 && (_mapRef$current$state = _mapRef$current.state) !== null && _mapRef$current$state !== void 0 && _mapRef$current$state.map) {\n      const map = mapRef.current.state.map;\n      if (markerClustererRef.current) {\n        markerClustererRef.current.clearMarkers();\n      }\n      const validFacilityMarkers = facilities.filter(facility => facility.fcltyCrdntLa !== 0 && facility.fcltyCrdntLo !== 0).map(facility => {\n        const marker = new window.google.maps.Marker({\n          position: {\n            lat: Number(facility.fcltyCrdntLa),\n            lng: Number(facility.fcltyCrdntLo)\n          },\n          icon: markerIcon\n        });\n        marker.addListener('click', () => {\n          setSelectedFacility(facility);\n        });\n        return marker;\n      });\n      markerClustererRef.current = new MarkerClusterer({\n        map,\n        markers: validFacilityMarkers,\n        gridSize: 60,\n        maxZoom: 10,\n        zIndex: 10,\n        styles: clusterStyles\n      });\n    }\n    return () => {\n      if (markerClustererRef.current) {\n        markerClustererRef.current.clearMarkers();\n      }\n    };\n  }, [facilities, mapRef, setSelectedFacility, markerIcon]);\n  return markerClustererRef;\n};\n_s(useMarkerClusterer, \"M9Dgwat9D7os76LLjNPiQlTYKV4=\");\nexport default useMarkerClusterer;","map":{"version":3,"names":["useRef","useEffect","MarkerClusterer","createSvgClusterIcon","size","color","opacity","svg","btoa","clusterStyles","textColor","textSize","width","height","url","anchor","useMarkerClusterer","mapRef","facilities","setSelectedFacility","markerIcon","_s","markerClustererRef","_mapRef$current","_mapRef$current$state","current","state","map","clearMarkers","validFacilityMarkers","filter","facility","fcltyCrdntLa","fcltyCrdntLo","marker","window","google","maps","Marker","position","lat","Number","lng","icon","addListener","markers","gridSize","maxZoom","zIndex","styles"],"sources":["/Users/dgsw01/Documents/GitHub/Nurijang-web/src/hooks/useMarkerClusterer.js"],"sourcesContent":["// hooks/useMarkerClusterer.js\nimport { useRef, useEffect } from 'react';\nimport { MarkerClusterer } from \"@googlemaps/markerclusterer\";\n\nconst createSvgClusterIcon = (size, color, opacity) => {\n  const svg = `\n    <svg width=\"${size}\" height=\"${size}\" viewBox=\"0 0 ${size} ${size}\" xmlns=\"http://www.w3.org/2000/svg\">\n      <circle \n        cx=\"${size/2}\" \n        cy=\"${size/2}\" \n        r=\"${size/2 - 2}\"\n        fill=\"${color}\"\n        fill-opacity=\"${opacity}\"\n        stroke=\"white\"\n        stroke-width=\"2\"\n      />\n    </svg>\n  `;\n  \n  return `data:image/svg+xml;base64,${btoa(svg)}`;\n};\n\nconst clusterStyles = [\n  {\n    textColor: 'white',\n    textSize: 14,\n    width: 40,\n    height: 40,\n    url: createSvgClusterIcon(40, '#596FB7', 0.9),\n    anchor: [20, 20]\n  },\n  {\n    textColor: 'white',\n    textSize: 16,\n    width: 50,\n    height: 50,\n    url: createSvgClusterIcon(50, '#11235A', 0.9),\n    anchor: [25, 25]\n  },\n  {\n    textColor: 'white',\n    textSize: 18,\n    width: 60,\n    height: 60,\n    url: createSvgClusterIcon(60, '#11235A', 1),\n    anchor: [30, 30]\n  }\n];\n\nconst useMarkerClusterer = ({ \n  mapRef, \n  facilities, \n  setSelectedFacility,\n  markerIcon\n}) => {\n  const markerClustererRef = useRef(null);\n\n  useEffect(() => {\n    if (mapRef.current?.state?.map) {\n      const map = mapRef.current.state.map;\n      \n      if (markerClustererRef.current) {\n        markerClustererRef.current.clearMarkers();\n      }\n\n      const validFacilityMarkers = facilities\n        .filter(facility => facility.fcltyCrdntLa !== 0 && facility.fcltyCrdntLo !== 0)\n        .map(facility => {\n          const marker = new window.google.maps.Marker({\n            position: {\n              lat: Number(facility.fcltyCrdntLa),\n              lng: Number(facility.fcltyCrdntLo)\n            },\n            icon: markerIcon\n          });\n\n          marker.addListener('click', () => {\n            setSelectedFacility(facility);\n          });\n\n          return marker;\n        });\n\n      markerClustererRef.current = new MarkerClusterer({ \n        map,\n        markers: validFacilityMarkers,\n        gridSize: 60,\n        maxZoom: 10,\n        zIndex: 10,\n        styles: clusterStyles\n      });\n    }\n\n    return () => {\n      if (markerClustererRef.current) {\n        markerClustererRef.current.clearMarkers();\n      }\n    };\n  }, [facilities, mapRef, setSelectedFacility, markerIcon]);\n\n  return markerClustererRef;\n};\n\nexport default useMarkerClusterer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}