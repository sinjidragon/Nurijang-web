{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useRef, useEffect } from 'react';\nimport { MarkerClusterer } from \"@googlemaps/markerclusterer\";\n\n// SVG 클러스터 아이콘 생성 함수\nconst createSvgClusterIcon = (size, color, opacity) => {\n  const svg = `\n    <svg width=\"${size}\" height=\"${size}\" viewBox=\"0 0 ${size} ${size}\" xmlns=\"http://www.w3.org/2000/svg\">\n      <circle\n        cx=\"${size / 2}\"\n        cy=\"${size / 2}\"\n        r=\"${size / 2 - 2}\"\n        fill=\"${color}\"\n        fill-opacity=\"${opacity}\"\n        stroke=\"white\"\n        stroke-width=\"2\"\n      />\n    </svg>\n  `;\n  return 'data:image/svg+xml;base64,' + btoa(svg);\n};\n\n// Renderer for custom cluster styling\nconst customRenderer = {\n  render: ({\n    count,\n    position\n  }) => {\n    // Determine cluster size based on marker count\n    let size, color, opacity;\n    if (count < 10) {\n      size = 40;\n      color = '#596FB7';\n      opacity = 0.95;\n    } else if (count < 50) {\n      size = 50;\n      color = '#11235A';\n      opacity = 0.95;\n    } else {\n      size = 60;\n      color = '#11235A';\n      opacity = 1;\n    }\n\n    // Create marker element\n    const element = document.createElement('div');\n    element.innerHTML = `\n      <div style=\"\n        width: ${size}px;\n        height: ${size}px;\n        background-image: url('${createSvgClusterIcon(size, color, opacity)}');\n        background-size: contain;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: white;\n        font-size: ${count < 10 ? '13' : count < 50 ? '14' : '16'}px;\n        font-weight: 500;\n      \">\n        ${count}\n      </div>\n    `;\n\n    // Create and return the advanced marker\n    return new google.maps.marker.AdvancedMarkerElement({\n      position,\n      content: element\n    });\n  }\n};\nconst useMarkerClusterer = ({\n  mapRef,\n  facilities,\n  setSelectedFacility,\n  markerIcon\n}) => {\n  _s();\n  const clustererRef = useRef(null);\n  useEffect(() => {\n    var _mapRef$current, _mapRef$current$state;\n    if (!((_mapRef$current = mapRef.current) !== null && _mapRef$current !== void 0 && (_mapRef$current$state = _mapRef$current.state) !== null && _mapRef$current$state !== void 0 && _mapRef$current$state.map)) return;\n    const map = mapRef.current.state.map;\n    if (clustererRef.current) {\n      clustererRef.current.clearMarkers();\n    }\n    const validFacilityMarkers = facilities.filter(facility => facility.fcltyCrdntLa !== 0 && facility.fcltyCrdntLo !== 0).map(facility => {\n      // Create marker element with custom icon\n      const element = document.createElement('div');\n      element.innerHTML = `\n          <img src=\"${markerIcon}\" alt=\"facility marker\" style=\"width: 24px; height: 24px;\">\n        `;\n      const marker = new google.maps.marker.AdvancedMarkerElement({\n        position: {\n          lat: Number(facility.fcltyCrdntLa),\n          lng: Number(facility.fcltyCrdntLo)\n        },\n        content: element\n      });\n\n      // Add click listener\n      marker.addListener('click', () => {\n        setSelectedFacility(facility);\n      });\n      return marker;\n    });\n\n    // Create new clusterer with custom renderer\n    clustererRef.current = new MarkerClusterer({\n      map,\n      markers: validFacilityMarkers,\n      renderer: customRenderer,\n      gridSize: 60,\n      maxZoom: 15,\n      zIndex: 1\n    });\n    return () => {\n      if (clustererRef.current) {\n        clustererRef.current.clearMarkers();\n      }\n    };\n  }, [facilities, mapRef, setSelectedFacility, markerIcon]);\n  return clustererRef;\n};\n_s(useMarkerClusterer, \"IMRUIXsUmwVJPmbaT4ErJRM7+ik=\");\nexport default useMarkerClusterer;","map":{"version":3,"names":["useRef","useEffect","MarkerClusterer","createSvgClusterIcon","size","color","opacity","svg","btoa","customRenderer","render","count","position","element","document","createElement","innerHTML","google","maps","marker","AdvancedMarkerElement","content","useMarkerClusterer","mapRef","facilities","setSelectedFacility","markerIcon","_s","clustererRef","_mapRef$current","_mapRef$current$state","current","state","map","clearMarkers","validFacilityMarkers","filter","facility","fcltyCrdntLa","fcltyCrdntLo","lat","Number","lng","addListener","markers","renderer","gridSize","maxZoom","zIndex"],"sources":["/Users/dgsw01/Documents/GitHub/Nurijang-web/src/hooks/useMarkerClusterer.js"],"sourcesContent":["import { useRef, useEffect } from 'react';\nimport { MarkerClusterer } from \"@googlemaps/markerclusterer\";\n\n// SVG 클러스터 아이콘 생성 함수\nconst createSvgClusterIcon = (size, color, opacity) => {\n  const svg = `\n    <svg width=\"${size}\" height=\"${size}\" viewBox=\"0 0 ${size} ${size}\" xmlns=\"http://www.w3.org/2000/svg\">\n      <circle\n        cx=\"${size/2}\"\n        cy=\"${size/2}\"\n        r=\"${size/2 - 2}\"\n        fill=\"${color}\"\n        fill-opacity=\"${opacity}\"\n        stroke=\"white\"\n        stroke-width=\"2\"\n      />\n    </svg>\n  `;\n  return 'data:image/svg+xml;base64,' + btoa(svg);\n};\n\n// Renderer for custom cluster styling\nconst customRenderer = {\n  render: ({ count, position }) => {\n    // Determine cluster size based on marker count\n    let size, color, opacity;\n    if (count < 10) {\n      size = 40;\n      color = '#596FB7';\n      opacity = 0.95;\n    } else if (count < 50) {\n      size = 50;\n      color = '#11235A';\n      opacity = 0.95;\n    } else {\n      size = 60;\n      color = '#11235A';\n      opacity = 1;\n    }\n\n    // Create marker element\n    const element = document.createElement('div');\n    element.innerHTML = `\n      <div style=\"\n        width: ${size}px;\n        height: ${size}px;\n        background-image: url('${createSvgClusterIcon(size, color, opacity)}');\n        background-size: contain;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: white;\n        font-size: ${count < 10 ? '13' : count < 50 ? '14' : '16'}px;\n        font-weight: 500;\n      \">\n        ${count}\n      </div>\n    `;\n\n    // Create and return the advanced marker\n    return new google.maps.marker.AdvancedMarkerElement({\n      position,\n      content: element\n    });\n  }\n};\n\nconst useMarkerClusterer = ({\n  mapRef,\n  facilities,\n  setSelectedFacility,\n  markerIcon\n}) => {\n  const clustererRef = useRef(null);\n\n  useEffect(() => {\n    if (!mapRef.current?.state?.map) return;\n\n    const map = mapRef.current.state.map;\n    \n    if (clustererRef.current) {\n      clustererRef.current.clearMarkers();\n    }\n\n    const validFacilityMarkers = facilities\n      .filter(facility => \n        facility.fcltyCrdntLa !== 0 &&\n        facility.fcltyCrdntLo !== 0\n      )\n      .map(facility => {\n        // Create marker element with custom icon\n        const element = document.createElement('div');\n        element.innerHTML = `\n          <img src=\"${markerIcon}\" alt=\"facility marker\" style=\"width: 24px; height: 24px;\">\n        `;\n\n        const marker = new google.maps.marker.AdvancedMarkerElement({\n          position: {\n            lat: Number(facility.fcltyCrdntLa),\n            lng: Number(facility.fcltyCrdntLo)\n          },\n          content: element\n        });\n\n        // Add click listener\n        marker.addListener('click', () => {\n          setSelectedFacility(facility);\n        });\n\n        return marker;\n      });\n\n    // Create new clusterer with custom renderer\n    clustererRef.current = new MarkerClusterer({\n      map,\n      markers: validFacilityMarkers,\n      renderer: customRenderer,\n      gridSize: 60,\n      maxZoom: 15,\n      zIndex: 1\n    });\n\n    return () => {\n      if (clustererRef.current) {\n        clustererRef.current.clearMarkers();\n      }\n    };\n  }, [facilities, mapRef, setSelectedFacility, markerIcon]);\n\n  return clustererRef;\n};\n\nexport default useMarkerClusterer;"],"mappings":";AAAA,SAASA,MAAM,EAAEC,SAAS,QAAQ,OAAO;AACzC,SAASC,eAAe,QAAQ,6BAA6B;;AAE7D;AACA,MAAMC,oBAAoB,GAAGA,CAACC,IAAI,EAAEC,KAAK,EAAEC,OAAO,KAAK;EACrD,MAAMC,GAAG,GAAG;AACd,kBAAkBH,IAAI,aAAaA,IAAI,kBAAkBA,IAAI,IAAIA,IAAI;AACrE;AACA,cAAcA,IAAI,GAAC,CAAC;AACpB,cAAcA,IAAI,GAAC,CAAC;AACpB,aAAaA,IAAI,GAAC,CAAC,GAAG,CAAC;AACvB,gBAAgBC,KAAK;AACrB,wBAAwBC,OAAO;AAC/B;AACA;AACA;AACA;AACA,GAAG;EACD,OAAO,4BAA4B,GAAGE,IAAI,CAACD,GAAG,CAAC;AACjD,CAAC;;AAED;AACA,MAAME,cAAc,GAAG;EACrBC,MAAM,EAAEA,CAAC;IAAEC,KAAK;IAAEC;EAAS,CAAC,KAAK;IAC/B;IACA,IAAIR,IAAI,EAAEC,KAAK,EAAEC,OAAO;IACxB,IAAIK,KAAK,GAAG,EAAE,EAAE;MACdP,IAAI,GAAG,EAAE;MACTC,KAAK,GAAG,SAAS;MACjBC,OAAO,GAAG,IAAI;IAChB,CAAC,MAAM,IAAIK,KAAK,GAAG,EAAE,EAAE;MACrBP,IAAI,GAAG,EAAE;MACTC,KAAK,GAAG,SAAS;MACjBC,OAAO,GAAG,IAAI;IAChB,CAAC,MAAM;MACLF,IAAI,GAAG,EAAE;MACTC,KAAK,GAAG,SAAS;MACjBC,OAAO,GAAG,CAAC;IACb;;IAEA;IACA,MAAMO,OAAO,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IAC7CF,OAAO,CAACG,SAAS,GAAG;AACxB;AACA,iBAAiBZ,IAAI;AACrB,kBAAkBA,IAAI;AACtB,iCAAiCD,oBAAoB,CAACC,IAAI,EAAEC,KAAK,EAAEC,OAAO,CAAC;AAC3E;AACA;AACA;AACA;AACA;AACA,qBAAqBK,KAAK,GAAG,EAAE,GAAG,IAAI,GAAGA,KAAK,GAAG,EAAE,GAAG,IAAI,GAAG,IAAI;AACjE;AACA;AACA,UAAUA,KAAK;AACf;AACA,KAAK;;IAED;IACA,OAAO,IAAIM,MAAM,CAACC,IAAI,CAACC,MAAM,CAACC,qBAAqB,CAAC;MAClDR,QAAQ;MACRS,OAAO,EAAER;IACX,CAAC,CAAC;EACJ;AACF,CAAC;AAED,MAAMS,kBAAkB,GAAGA,CAAC;EAC1BC,MAAM;EACNC,UAAU;EACVC,mBAAmB;EACnBC;AACF,CAAC,KAAK;EAAAC,EAAA;EACJ,MAAMC,YAAY,GAAG5B,MAAM,CAAC,IAAI,CAAC;EAEjCC,SAAS,CAAC,MAAM;IAAA,IAAA4B,eAAA,EAAAC,qBAAA;IACd,IAAI,GAAAD,eAAA,GAACN,MAAM,CAACQ,OAAO,cAAAF,eAAA,gBAAAC,qBAAA,GAAdD,eAAA,CAAgBG,KAAK,cAAAF,qBAAA,eAArBA,qBAAA,CAAuBG,GAAG,GAAE;IAEjC,MAAMA,GAAG,GAAGV,MAAM,CAACQ,OAAO,CAACC,KAAK,CAACC,GAAG;IAEpC,IAAIL,YAAY,CAACG,OAAO,EAAE;MACxBH,YAAY,CAACG,OAAO,CAACG,YAAY,CAAC,CAAC;IACrC;IAEA,MAAMC,oBAAoB,GAAGX,UAAU,CACpCY,MAAM,CAACC,QAAQ,IACdA,QAAQ,CAACC,YAAY,KAAK,CAAC,IAC3BD,QAAQ,CAACE,YAAY,KAAK,CAC5B,CAAC,CACAN,GAAG,CAACI,QAAQ,IAAI;MACf;MACA,MAAMxB,OAAO,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;MAC7CF,OAAO,CAACG,SAAS,GAAG;AAC5B,sBAAsBU,UAAU;AAChC,SAAS;MAED,MAAMP,MAAM,GAAG,IAAIF,MAAM,CAACC,IAAI,CAACC,MAAM,CAACC,qBAAqB,CAAC;QAC1DR,QAAQ,EAAE;UACR4B,GAAG,EAAEC,MAAM,CAACJ,QAAQ,CAACC,YAAY,CAAC;UAClCI,GAAG,EAAED,MAAM,CAACJ,QAAQ,CAACE,YAAY;QACnC,CAAC;QACDlB,OAAO,EAAER;MACX,CAAC,CAAC;;MAEF;MACAM,MAAM,CAACwB,WAAW,CAAC,OAAO,EAAE,MAAM;QAChClB,mBAAmB,CAACY,QAAQ,CAAC;MAC/B,CAAC,CAAC;MAEF,OAAOlB,MAAM;IACf,CAAC,CAAC;;IAEJ;IACAS,YAAY,CAACG,OAAO,GAAG,IAAI7B,eAAe,CAAC;MACzC+B,GAAG;MACHW,OAAO,EAAET,oBAAoB;MAC7BU,QAAQ,EAAEpC,cAAc;MACxBqC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE,EAAE;MACXC,MAAM,EAAE;IACV,CAAC,CAAC;IAEF,OAAO,MAAM;MACX,IAAIpB,YAAY,CAACG,OAAO,EAAE;QACxBH,YAAY,CAACG,OAAO,CAACG,YAAY,CAAC,CAAC;MACrC;IACF,CAAC;EACH,CAAC,EAAE,CAACV,UAAU,EAAED,MAAM,EAAEE,mBAAmB,EAAEC,UAAU,CAAC,CAAC;EAEzD,OAAOE,YAAY;AACrB,CAAC;AAACD,EAAA,CA/DIL,kBAAkB;AAiExB,eAAeA,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}